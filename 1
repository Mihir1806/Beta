I have a piece of code that currently works partially but not reliably. It handles loops, comparisons, and calculations, but only produces correct results about 60â€“70% of the time. I want you to carefully analyze the code, identify where the logic may fail, and then redesign and rewrite it in a clean, optimized, and reliable way so that it consistently produces the correct output in all scenarios. Make sure the final version is efficient, handles edge cases, and is easy to understand and maintain.