import http.client
import json

def get_jira_data(api_key, jira_url, filter_id):
    conn = http.client.HTTPSConnection(jira_url)
    headers = {
        'Authorization': f'Bearer {api_key}',
        'Content-Type': 'application/json'
    }
    
    try:
        conn.request("GET", f"/rest/api/2/filter/{filter_id}/results", headers=headers)
        response = conn.getresponse()
        
        if response.status == 200:
            data = response.read()
            return json.loads(data)
        else:
            print(f"Failed to fetch data: {response.status} - {response.reason}")
            return None
    except Exception as e:
        print(f"Error occurred: {e}")
        return None

def calculate_kpis(data):
    total_issues = data['total']
    return {
        'total_issues': total_issues,
    }

def main():
    api_key = 'your_api_key_here'
    jira_url = 'your_jira_instance.atlassian.net'
    filter_id = 'YOUR_FILTER_ID'
    
    data = get_jira_data(api_key, jira_url, filter_id)
    
    if data:
        kpis = calculate_kpis(data)
        print("KPIs:", kpis)

if __name__ == "__main__":
    main()





SSL error occurred: HTTPSConnectionPool (host='jira cib.echonet', port=443): Max retries exceeded with url: /rest/api/3/ filter/43358/results (Caused by SSLError(SSLError(1, '[SSL: SSLV3_ALERT_HANDSHAKE_FAILURE] ssIv3 alert handshake failure(_ssl.c:997)')))
[Donel exited with

